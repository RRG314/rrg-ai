<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RRG AI</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <main class="app">
      <header class="topbar">
        <div>
          <h1>RRG AI</h1>
          <p>Local AI chat with web tools, file tools, image OCR, and recursive-adic retrieval.</p>
        </div>
        <div class="actions">
          <button id="new-session" class="ghost">New Chat</button>
          <button id="clear-memory" class="ghost warn">Clear Memory</button>
        </div>
      </header>

      <section class="status" id="status"></section>

      <section class="layout">
        <aside class="sessions">
          <h2>Sessions</h2>
          <div id="session-list"></div>
        </aside>

        <section class="chat-panel">
          <section class="toolbar">
            <div class="row">
              <button id="auto-connect" class="ghost">Auto Connect</button>
              <div id="connection-hint" class="hint">Trying to connect...</div>
            </div>
            <div class="row">
              <select id="quick-action">
                <option value="">Quick Action...</option>
                <option value="define">Define a word</option>
                <option value="search_web">Search the web</option>
                <option value="read_site">Read a website URL</option>
                <option value="download_url">Download from URL</option>
                <option value="read_file">Read a local file</option>
                <option value="find_files">Find text in local files</option>
                <option value="analyze_image">Analyze an image (OCR)</option>
              </select>
              <button id="apply-quick-action" class="ghost">Use</button>
            </div>
            <div class="row row-tight">
              <label class="check">
                <input id="strict-facts" type="checkbox" checked />
                Strict Fact Mode (cite sources, avoid unsupported claims)
              </label>
            </div>
            <div class="row row-tight">
              <label class="check">
                <input id="run-agent" type="checkbox" checked />
                Run as Agent (planner/executor loop)
              </label>
            </div>
            <div class="row row-tight">
              <label class="check">
                <input id="evidence-mode" type="checkbox" checked />
                Evidence Mode (claim -> sources -> snippets -> confidence)
              </label>
            </div>
            <details class="advanced">
              <summary>Advanced Options</summary>
              <div class="advanced-body">
                <div class="row">
                  <input id="backend-url" type="text" placeholder="Backend URL (optional override)" />
                  <button id="connect-backend" class="ghost">Connect Backend</button>
                </div>
                <div class="row">
                  <input id="upload-file" type="file" />
                  <button id="upload-button" class="ghost">Upload File</button>
                </div>
                <div class="row">
                  <input id="image-file" type="file" accept="image/*" />
                  <button id="image-button" class="ghost">Analyze Image</button>
                </div>
                <div class="row">
                  <input id="image-prompt" type="text" placeholder="Optional image question (example: summarize key text)" />
                </div>
                <div class="row">
                  <input id="ingest-url" type="text" placeholder="Website URL to read and remember" />
                  <button id="ingest-button" class="ghost">Read URL</button>
                </div>
              </div>
            </details>
          </section>
          <div id="chat-log" class="chat-log"></div>
          <details class="agent-trace" id="agent-trace-panel">
            <summary>Agent Trace</summary>
            <div class="trace-grid">
              <section>
                <h3>Plan / Step Status</h3>
                <pre id="agent-plan-view">No agent run yet.</pre>
              </section>
              <section>
                <h3>Tool Calls</h3>
                <pre id="agent-tools-view">No tool calls yet.</pre>
              </section>
              <section>
                <h3>Provenance / Citations</h3>
                <pre id="agent-provenance-view">No provenance yet.</pre>
              </section>
              <section>
                <h3>Evidence Objects</h3>
                <pre id="agent-evidence-view">No evidence yet.</pre>
              </section>
            </div>
          </details>
          <form id="chat-form" class="composer">
            <textarea
              id="chat-input"
              placeholder="Chat naturally. Example: search the web for local llm eval frameworks and compare them."
              rows="3"
            ></textarea>
            <button type="submit" id="send">Send</button>
          </form>
        </section>
      </section>
    </main>

    <script src="corpus.js"></script>
    <script src="app.js"></script>
  </body>
</html>
